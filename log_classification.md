# Revised Log Classification and Strategy

This document refines the logging statements in the project to be more user-friendly, provide actionable insights, and use appropriate log levels.

## Logging Philosophy

*   **End User:** Messages for the person running the application. They should be clear, friendly, and explain what to do if there's a problem. These will primarily use `println!` at startup for critical, blocking issues, or `log::info!` for major lifecycle events.
*   **Developer:** Messages for someone building the application. These help trace the application's flow during development (e.g., live reload). These should use `log::debug!` or `log::trace!` so they don't clutter production logs.
*   **Troubleshooting:** Messages for developers or operators running the application in production. They highlight problems that need attention. These should use `log::warn!` for potential issues and `log::error!` for definite errors that impact functionality.

## Revised Log Messages

| File and Line | Original Message | Proposed New Message & Level | Audience | Actionable Insight |
| :--- | :--- | :--- | :--- | :--- |
| **`main.rs:226`** | `Error: Invalid secret_key...` | **`println!`**: "Your `secret_key` in `config.yaml` is not long enough. It needs to be at least 64 characters long for security. Please generate a new, longer key." | End User | **To fix:** Run `openssl rand -base64 48` in your terminal to generate a secure key and paste it into your `config.yaml`. |
| **`config.rs:90`** | `Error: config.yaml not found...` | **`println!`**: "I couldn't find the `config.yaml` file. Make sure it's in the same directory you're running the application from." | End User | **To fix:** Check that `config.yaml` exists. If not, you can copy `config.template.yaml` to `config.yaml` to get started. |
| **`config.rs:94`** | `Error: Could not parse config.yaml.` | **`println!`**: "There seems to be a syntax error in your `config.yaml` file. Please check the formatting." | End User | **To fix:** Validate your YAML syntax. Look for incorrect indentation or missing colons. The error details below will point to the problem area. |
| **`main.rs:117`** | `Successfully created project...` | **`println!`**: "âœ¨ Your new project `{}` has been created successfully! Happy coding!" | End User | This is a success message. No action is needed. |
| **`main.rs:260`** | `No session configuration found...` | **`log::warn!`**: "Security warning: No session key found in `config.yaml`. Using a temporary, insecure key. This is okay for development, but you **must** set a `secret_key` for production." | Troubleshooting | **To fix:** Add a secure `secret_key` to your `config.yaml` before deploying your application to a live server to keep user sessions safe. |
| **`routing.rs:240`** | `Shedding request due to high latency.` | **`log::warn!`**: "High traffic alert: The server is busy and had to turn away a request to keep things stable. If you see this often, consider increasing server resources." | Troubleshooting | **Action:** Monitor your server's CPU and memory. If this warning persists, you may need to upgrade your hosting plan or optimize your application's performance. |
| **`actors/load_shedding.rs:83`** | `Latency high, entering shedding mode.` | **`log::warn!`**: "System is under high load (P95 Latency: {:.2}ms). Activating defense mode to prevent overload." | Troubleshooting | **Action:** This is the start of a high-load event. The system is protecting itself. Monitor to see if it recovers. |
| **`actors/load_shedding.rs:89`** | `Latency recovered, exiting shedding mode.` | **`log::info!`**: "System load has returned to normal (P95 Latency: {:.2}ms). Deactivating defense mode." | Troubleshooting | This confirms the system has recovered from a high-load event. No action is needed unless it happens frequently. |
| **`actors/page_renderer.rs:120`** | `Error rendering template: {}` | **`log::error!`**: "A page template failed to render: {}. This is usually caused by a syntax error in the template file or a problem in the component's Python code." | Troubleshooting | **To fix:** Check the template file mentioned in the error for mistakes. Also, review the associated Python logic file for that component. |
| **`actors/template_renderer.rs:320`** | `Error executing python function: {}` | **`log::error!`**: "A Python function called from a template crashed: {}. The page could not be rendered." | Troubleshooting | **To fix:** The error message will point to the Python function that failed. Debug that function in your component's logic file. |
| **`actors/interpreter.rs:91`** | `Failed to initialize database: {}` | **`log::error!`**: "Could not initialize the database. Your `db.py` script ran into an error: {}" | Troubleshooting | **To fix:** Check your `db.py` file. Ensure the database connection details are correct and the `initialize_database` function runs without errors. |
| **`actors/dev_websockets.rs:38`** | `WebSocket error: {:?}` | **`log::error!`**: "The live-reload connection failed: {:?}. Your browser might not auto-refresh when you save files." | Troubleshooting | **To fix:** This can sometimes be a temporary network issue. Try refreshing your browser. If it persists, check your network connection and browser console for errors. |
| **`main.rs:135`** | `Failed to add framework to sys.path` | **`log::error!`**: "Critical startup failure: Could not add the framework to Python's path. Components will not work." | Troubleshooting | **To fix:** This is an internal framework error. Please report this as a bug. It may be related to file permissions or an unusual project path. |
| **`main.rs:199`** | `Adaptive load shedding is ENABLED.` | **`log::debug!`**: "Adaptive load shedding is enabled." | Developer | This is a startup configuration detail, useful for developers but not needed in production logs unless debugging performance. |
| **`actors/router.rs:33`** | `Reloading routes...` | **`log::debug!`**: "File change detected. Reloading routes..." | Developer | Informs the developer that live-reload is working as expected. |
| **`actors/interpreter.rs:142`** | `Interpreter received request...` | **`log::trace!`**: "Interpreter {} processing request for component '{}'" | Developer | This is a very detailed message for tracing a request. It's helpful for deep debugging but too noisy for regular development. |
